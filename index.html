<!doctype html>
<html lang="it">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Flashcard Autori Fiaba</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:wght@400;700&display=swap" rel="stylesheet">

<style>
  :root{
    --gap: 12px;
    --radius: 18px;
    --border: 1px solid rgba(0,0,0,.14);
    --shadow: 0 10px 22px rgba(0,0,0,.12);
    --header-h: 76px;
    --pad: 12px;
  }

  *{ box-sizing:border-box; }

  html, body{
    margin:0;
    height:100%;
    background:#fff;
    color:#111;
    font-family:"Atkinson Hyperlegible", Arial, sans-serif;
  }

  body{ overflow:hidden; }

  header{
    height: var(--header-h);
    display:flex;
    flex-direction:column;
    justify-content:center;
    text-align:center;
    padding: 10px 12px;
    gap: 4px;
  }

  header h1{
    margin:0;
    font-size: 18px;
    line-height:1.15;
  }

  header p{
    margin:0;
    font-size: 13px;
    line-height:1.2;
  }

  main{
    height: calc(100vh - var(--header-h));
    padding: var(--pad);
  }

  .grid{
    height:100%;
    display:grid;
    grid-template-columns: repeat(4, 1fr);
    grid-template-rows: repeat(2, 1fr);
    gap: var(--gap);
  }

  @media (max-width: 980px){
    .grid{
      grid-template-columns: repeat(2, 1fr);
      grid-template-rows: repeat(4, 1fr);
    }
  }

  .card{ perspective: 1200px; }

  .card > button{
    all:unset;
    width:100%;
    height:100%;
    display:block;
    cursor:pointer;
    border-radius: var(--radius);
  }

  .card-inner{
    position:relative;
    width:100%;
    height:100%;
    border-radius: var(--radius);
    transform-style: preserve-3d;
    transition: transform .6s ease;
    box-shadow: var(--shadow);
  }

  .card.flipped .card-inner{ transform: rotateY(180deg); }

  .side{
    position:absolute;
    inset:0;
    border-radius: var(--radius);
    overflow:hidden;
    backface-visibility:hidden;
    border: var(--border);
    background:#fff;
  }

  /* FRONTE */
  .front .img-wrap{
    position:relative;
    width:100%;
    height:100%;
    background:#f2f2f2;
  }
  .front img{
    width:100%;
    height:100%;
    object-fit:cover;
    display:block;
  }

  /* Nome in alto */
  .name{
    position:absolute;
    top:10px;
    left:50%;
    transform: translateX(-50%);
    width:92%;
    text-align:center;
    font-weight:700;
    text-transform:uppercase;
    letter-spacing:1px;
    color:#fff;
    background: rgba(0,0,0,.60);
    padding: 8px 10px;
    border-radius: 14px;
    font-size: clamp(13px, 1.5vw, 20px);
    line-height: 1.15;
  }

  /* RETRO */
  .back{
    transform: rotateY(180deg);
    padding: 12px;
    display:flex;
    flex-direction:column;
    gap: 8px;
  }
  .back h2{
    margin:0;
    font-size: clamp(14px, 1.4vw, 18px);
    text-transform:uppercase;
    letter-spacing:.6px;
  }

  /* TESTO PIÙ GRANDE */
  .back p{
    margin:0;
    text-align:justify;
    line-height:1.45;
    font-size: clamp(15px, 1.35vw, 19px);
    overflow:auto;
    padding-right: 4px;
  }

  /* Se un'immagine manca, mostra un messaggio chiaro */
  .missing{
    display:flex;
    align-items:center;
    justify-content:center;
    height:100%;
    padding:12px;
    text-align:center;
    font-weight:700;
  }

  .card > button:focus-visible .card-inner{
    box-shadow: 0 0 0 4px rgba(0,0,0,.22), var(--shadow);
  }
</style>
</head>

<body>
<header>
  <h1>Flashcard autori della fiaba</h1>
  <p>Clicca sulla card per capovolgerla</p>
</header>

<main>
  <section class="grid" id="grid" aria-label="Flashcard autori"></section>
</main>

<script>
  // Ordine cronologico
  const cards = [
    {
      name: "LE MILLE E UNA NOTTE",
      img: "mille.png",
      title: "Le Mille e una notte",
      text: "Sono Shahrazād: ogni notte racconto una storia per salvarmi, fermandomi sul momento più avvincente. Forse conoscete Aladino, Ali Babà e i quaranta ladroni. I protagonisti cambiano il destino con intelligenza e coraggio. Le mie storie possono salvare."
    },
    {
      name: "PERRAULT",
      img: "perrault.png",
      title: "Charles Perrault",
      text: "Nel Seicento ho dato forma scritta alle fiabe tradizionali. Racconto magia e insegnamenti: in Cenerentola la bontà è premiata, in Cappuccetto Rosso avverto dei pericoli. Tra fate e incantesimi mostro virtù e difetti umani."
    },
    {
      name: "FRATELLI GRIMM",
      img: "grimm.png",
      title: "Fratelli Grimm",
      text: "Siamo i fratelli Grimm e nell’Ottocento abbiamo raccolto le fiabe del nostro popolo: ascoltate a voce, poi scritte. Parlano di emozioni profonde e aiutano a crescere. Tra le storie più note ci sono Biancaneve, Hansel e Gretel, La bella addormentata nel bosco."
    },
    {
      name: "ANDERSEN",
      img: "andersen.png",
      title: "Hans Christian Andersen",
      text: "Ho reso la fiaba intima e profonda: nasce spesso da emozioni personali. Parlo di solitudine, speranza e desiderio di essere accettati. Nelle mie storie come La Sirenetta e Il Brutto Anatroccolo la fragilità diventa forza."
    },
    {
      name: "AFANASIEV",
      img: "afanasiev.png",
      title: "Aleksandr Afanasiev",
      text: "Ho raccolto le fiabe russe per conservarne l’anima. Nei racconti vivono Baba Jaga e l’Uccello di Fuoco, tra boschi immensi e inverni freddi. I protagonisti vincono con astuzia e coraggio: la fantasia aiuta ad affrontare la vita."
    },
    {
      name: "MUNARI",
      img: "munari.png",
      title: "Bruno Munari",
      text: "Nel Novecento ho cambiato il modo di raccontare ai bambini: il libro non è solo da leggere, ma da toccare ed esplorare. Con immagini, materiali e forme semplici invito a osservare e immaginare. Fantasia significa scoprire nuove possibilità."
    },
    {
      name: "RODARI",
      img: "rodari.png",
      title: "Gianni Rodari",
      text: "Per me la fiaba è un gioco serio che allena il cervello. Le storie possono capovolgersi e sorprendere. Unendo parole lontane, come cane e armadio, nasce un racconto: ogni bambino può inventare e diventare autore."
    },
    {
      name: "CALVINO",
      img: "calvino.png",
      title: "Italo Calvino",
      text: "Ho raccolto e riscritto le Fiabe italiane cercando storie in tutte le regioni. Ho mantenuto magia, prove e ironia. Le fiabe mostrano la ricchezza della cultura italiana."
    }
  ];

  const grid = document.getElementById("grid");

  function escapeHtml(str){
    return String(str)
      .replaceAll("&","&amp;")
      .replaceAll("<","&lt;")
      .replaceAll(">","&gt;")
      .replaceAll('"',"&quot;")
      .replaceAll("'","&#039;");
  }

  cards.forEach(c => {
    const el = document.createElement("article");
    el.className = "card";

    el.innerHTML = `
      <button type="button" aria-label="Capovolgi card: ${escapeHtml(c.name)}">
        <div class="card-inner">
          <div class="side front">
            <div class="img-wrap">
              <img src="${escapeHtml(c.img)}" alt="Immagine: ${escapeHtml(c.name)}">
              <div class="name">${escapeHtml(c.name)}</div>
            </div>
          </div>
          <div class="side back">
            <h2>${escapeHtml(c.title)}</h2>
            <p>${escapeHtml(c.text)}</p>
          </div>
        </div>
      </button>
    `;

    // Se un'immagine non si carica, mostra un messaggio
    const img = el.querySelector("img");
    img.addEventListener("error", () => {
      const wrap = el.querySelector(".img-wrap");
      wrap.innerHTML = `<div class="missing">Immagine non trovata.<br>Controlla il nome del file.</div><div class="name">${escapeHtml(c.name)}</div>`;
    });

    el.querySelector("button").addEventListener("click", () => el.classList.toggle("flipped"));
    grid.appendChild(el);
  });
</script>
</body>
</html>
